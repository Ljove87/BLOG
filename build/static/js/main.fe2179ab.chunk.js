(this.webpackJsonpblog_post=this.webpackJsonpblog_post||[]).push([[0],{16:function(e,t,n){e.exports=n(41)},21:function(e,t,n){},23:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(14),l=n.n(o),c=(n(21),n(1)),u=n.n(c),i=n(15),s=n(3),d=(n(23),function(e){var t=e.blog,n=e.increment,a=e.deleteBlog;return r.a.createElement("div",null,r.a.createElement("button",{onClick:a},"Delete"),"   ",t.title," ",t.author," ",t.likes," ",r.a.createElement("button",{onClick:n},"Like"))}),m=function(e){var t=e.handleSubmit,n=e.handleUsernameChange,a=e.handlePasswordChange,o=e.username,l=e.password;return r.a.createElement("div",null,r.a.createElement("h2",null,"Login"),r.a.createElement("form",{onSubmit:t},r.a.createElement("div",null,"username",r.a.createElement("input",{type:"text",value:o,onChange:n})),r.a.createElement("div",null,"password",r.a.createElement("input",{type:"password",value:l,onChange:a})),r.a.createElement("button",{type:"submit"},"Login")))},f=function(e){var t=e.onSubmit,n=e.handleTitleChange,a=e.handleAuthorChange,o=e.handleUrlChange,l=e.title,c=e.author,u=e.url;return r.a.createElement("div",null,r.a.createElement("h2",null,"Login"),r.a.createElement("form",{onSubmit:t},r.a.createElement("div",null,"title",r.a.createElement("input",{type:"text",value:l,onChange:n})),r.a.createElement("div",null,"author",r.a.createElement("input",{type:"text",value:c,onChange:a})),r.a.createElement("div",null,"url",r.a.createElement("input",{type:"text",value:u,onChange:o})),r.a.createElement("button",{type:"submit"},"Create")))},p=function(e){var t=e.message;return null===t?null:r.a.createElement("div",{className:"error"},t)},g=function(){return r.a.createElement("div",null,r.a.createElement("h5",null,"Tip: use username Tea, password: qagb3lslija in order to login to this app. There is no registration option nor it will be."))},h=n(4),v=n.n(h),b=function(e){var t;return u.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,u.a.awrap(v.a.post("http://localhost:3001/api/login",e));case 2:return t=n.sent,n.abrupt("return",t.data);case 4:case"end":return n.stop()}}))},E="http://localhost:3001/api/blogs",w=null,O=function(){return v.a.get(E)},j=function(e){w="bearer ".concat(e)},y=function(e){var t,n;return u.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t={headers:{Authorization:w}},a.next=3,u.a.awrap(v.a.post(E,e,t));case 3:return n=a.sent,a.abrupt("return",n.data);case 5:case"end":return a.stop()}}))},C=function(e,t){var n,a;return u.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return n=v.a.put("".concat(E,"/").concat(e),t),r.next=3,u.a.awrap(n);case 3:return a=r.sent,r.abrupt("return",a.data);case 5:case"end":return r.stop()}}))},S=function(e){var t,n,a;return u.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t={headers:{Authorization:w}},n=v.a.delete("".concat(E,"/").concat(e),t),r.next=4,u.a.awrap(n);case 4:return a=r.sent,r.abrupt("return",a.data);case 6:case"end":return r.stop()}}))},x=function(){var e=Object(a.useState)([]),t=Object(s.a)(e,2),n=t[0],o=t[1],l=Object(a.useState)(null),c=Object(s.a)(l,2),h=c[0],v=c[1],E=Object(a.useState)(""),w=Object(s.a)(E,2),x=w[0],k=w[1],B=Object(a.useState)(""),T=Object(s.a)(B,2),U=T[0],A=T[1],L=Object(a.useState)(null),D=Object(s.a)(L,2),J=D[0],N=D[1],I=Object(a.useState)(""),z=Object(s.a)(I,2),P=z[0],W=z[1],_=Object(a.useState)(""),q=Object(s.a)(_,2),$=q[0],F=q[1],G=Object(a.useState)(""),H=Object(s.a)(G,2),K=H[0],M=H[1];Object(a.useEffect)((function(){console.log("effect"),O().then((function(e){console.log("promise fulfiled"),o(e.data)})).catch((function(e){console.log("response",e.response),console.log("error")}))}),[]),Object(a.useEffect)((function(){var e=window.localStorage.getItem("loggedBlogUser");if(e){var t=JSON.parse(e);v(t),j(t.token)}}),[]);var Q=function(e){var t;return u.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e.preventDefault(),n.prev=1,n.next=4,u.a.awrap(b({username:x,password:U}));case 4:t=n.sent,window.localStorage.setItem("loggedBlogUser",JSON.stringify(t)),v(t),k(""),A(""),console.log("success"),n.next=17;break;case 12:n.prev=12,n.t0=n.catch(1),N("wrong credentials"),setTimeout((function(){N(null)}),5e3),console.log("baaad");case 17:case"end":return n.stop()}}),null,null,[[1,12]])},R=function(e){var t;return u.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:e.preventDefault(),t={title:P,author:$,url:K,date:new Date},y(t).then((function(e){o(n.concat(e)),W(""),F(""),M(""),N("".concat($," created new blog with name ").concat(P)),setTimeout((function(){N(null)}),5e3)}));case 3:case"end":return a.stop()}}))},V=function(e){console.log(e.target.value),W(e.target.value)},X=function(){return u.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:window.localStorage.clear(),v(null);case 2:case"end":return e.stop()}}))};return r.a.createElement("div",{className:"App"},null===h?r.a.createElement("div",null,r.a.createElement(p,{message:J}),r.a.createElement("div",null,r.a.createElement(m,{username:x,password:U,handleUsernameChange:function(e){var t=e.target;return k(t.value)},handlePasswordChange:function(e){var t=e.target;return A(t.value)},handleSubmit:Q})),r.a.createElement(g,null)):r.a.createElement("div",null,r.a.createElement(p,{message:J}),r.a.createElement("div",null,r.a.createElement(f,{title:P,author:$,url:K,handleTitleChange:V,handleAuthorChange:function(e){var t=e.target;return F(t.value)},handleUrlChange:function(e){var t=e.target;return M(t.value)},onSubmit:R})),r.a.createElement("div",null,r.a.createElement("h2",null,"Blogs"),r.a.createElement("p",null,h.name," logged in"),r.a.createElement("div",null,r.a.createElement("button",{type:"reset",onClick:X},"Logout")),n.map((function(e,t){return r.a.createElement(d,{key:t,deleteBlog:function(){return t=e.id,console.log("deleted blog"),void S(t).then((function(e){o(n.filter((function(e){return e.id!==t})))})).catch((function(e){console.log(e.response)}));var t},blog:e,increment:function(){return function(e){var t=n.find((function(t){return t.id===e}));console.log("blog id",t);var a=Object(i.a)({},t,{likes:t.likes+1});C(e,a).then((function(t){o(n.map((function(n){return n.id!==e?n:t})))})).catch((function(e){N("Blog was already removed from server"),setTimeout((function(){N(null)}),5e3)}))}(e.id)}})})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(x,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[16,1,2]]]);
//# sourceMappingURL=main.fe2179ab.chunk.js.map